{"version":3,"file":"static/js/243.a5086dce.chunk.js","mappings":"uRACA,EAAiC,8C,WCQ7BA,EAAoBC,aAAaC,QAAQ,SA8F7C,EA5F+B,WAAO,IAAD,IAC7BC,GAAWC,EAAAA,EAAAA,MACXC,GAAOC,EAAAA,EAAAA,KAAY,SAACC,GAAK,OAAKA,EAAMF,IAAI,IACxCG,EAAyB,QAAZ,GAAGC,EAAAA,EAAAA,aAAS,OAAa,QAAb,EAAT,EAAWC,mBAAW,WAAb,EAAT,EAAwBF,cAcxCG,EAA4B,yCAAG,8FAC/BX,EAAoBY,KAAKC,OAAK,gBAG9B,OAFFC,EAAAA,GAAAA,MACE,6EACA,0BAGFd,EAAoBY,KAAKC,MAAQ,IACjCZ,aAAac,QAAQ,QAASf,GAAmB,OAMnB,OAH1BgB,EAAU,IAAIC,SACZC,OAAO,SAAU,oBACzBF,EAAQE,OAAO,gBAAiB,2CAChCF,EAAQE,OAAO,OAAQb,EAAKc,IAAI,UAETC,MAAM,+DAAD,OACqCf,EAAKgB,MAAK,qBAAahB,EAAKiB,MAC3F,CAAEN,QAAAA,IACF,KAAD,GAHa,OAKDO,GACXT,EAAAA,GAAAA,QACE,6DAGFA,EAAAA,GAAAA,MAAY,wCACb,4CACF,kBA5BiC,mCA8BlC,OACE,SAACU,EAAA,EAAK,CACJC,MAAOjB,EAEP,kBAAgB,oBAChB,mBAAiB,0BAAyB,UAE1C,UAACkB,EAAA,EAAG,CAACC,GAjDK,CACZC,SAAU,WACVC,IAAK,MACLC,KAAM,MACNC,UAAW,wBACXC,MAAO,IACPC,QAAS,mBACTC,OAAQ,iBACRC,UAAW,GACXC,EAAG,GAwCc,WACb,SAACC,EAAA,EAAU,CACTV,GAAI,CAAEW,UAAW,UACjBnB,GAAG,oBACHoB,QAAQ,KACRC,UAAU,KAAI,+DAIhB,iBAAKC,UAAWC,EAA0B,WACxC,mBACEC,QAAShC,EACT8B,UAAU,eAAc,sCAI1B,mBACEE,QAAS,kBAAMxC,EAAS,IAAI,EAC5BsC,UAAU,uBAAsB,4BAkB5C,C","sources":["webpack://inspedium-email/./src/components/Misc/EmailVerficationToast.module.css?4444","components/Misc/EmailVerificationToast.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"handle-actions\":\"EmailVerficationToast_handle-actions__3A1Rv\"};","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { getAuth } from \"firebase/auth\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Box, Modal, Typography } from \"@mui/material\";\r\n\r\nimport classes from \"./EmailVerficationToast.module.css\";\r\n\r\nlet verificationTimer = localStorage.getItem(\"timer\");\r\n\r\nconst EmailVerificationToast = () => {\r\n  const navigate = useNavigate();\r\n  const auth = useSelector((state) => state.auth);\r\n  const emailVerified = getAuth()?.currentUser?.emailVerified;\r\n\r\n  const style = {\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n    width: 400,\r\n    bgcolor: \"background.paper\",\r\n    border: \"2px solid #000\",\r\n    boxShadow: 24,\r\n    p: 4,\r\n  };\r\n\r\n  const sendEmailVerificationHandler = async () => {\r\n    if (verificationTimer > Date.now()) {\r\n      toast.error(\r\n        \"Please wait at least 5 minutes before sending another verification email.\"\r\n      );\r\n      return;\r\n    } else {\r\n      verificationTimer = Date.now() + 5 * 60 * 1000;\r\n      localStorage.setItem(\"timer\", verificationTimer);\r\n    }\r\n\r\n    const headers = new Headers();\r\n    headers.append(\"accept\", \"application/json\");\r\n    headers.append(\"Authorization\", \"Bearer 28gYwtmko2V1TA2S3JnIqB2gUnKnrg75\");\r\n    headers.append(\"uuid\", auth.id);\r\n\r\n    const response = await fetch(\r\n      `https://api.inspedium.email/sendEmailVerification?userEmail=${auth.email}&userName=${auth.name}`,\r\n      { headers }\r\n    );\r\n\r\n    if (response.ok) {\r\n      toast.success(\r\n        \"Verfication email has been sent. Please check your email.\"\r\n      );\r\n    } else {\r\n      toast.error(\"Verification email couldn't be sent.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      open={!emailVerified}\r\n      //   onClose={handleClose}\r\n      aria-labelledby=\"modal-modal-title\"\r\n      aria-describedby=\"modal-modal-description\"\r\n    >\r\n      <Box sx={style}>\r\n        <Typography\r\n          sx={{ textAlign: \"center\" }}\r\n          id=\"modal-modal-title\"\r\n          variant=\"h6\"\r\n          component=\"h2\"\r\n        >\r\n          Dear User, please verify your email to continue.\r\n        </Typography>\r\n        <div className={classes[\"handle-actions\"]}>\r\n          <button\r\n            onClick={sendEmailVerificationHandler}\r\n            className=\"color-button\"\r\n          >\r\n            Send Email Verification\r\n          </button>\r\n          <button\r\n            onClick={() => navigate(\"/\")}\r\n            className=\"color-inverse-button\"\r\n          >\r\n            Go Back\r\n          </button>\r\n        </div>\r\n      </Box>\r\n    </Modal>\r\n  );\r\n\r\n  //   return (\r\n  //     !emailVerified &&\r\n  //     toast.error(<button className=\"color-button\">LOGIN</button>, {\r\n  //       closeButton: false,\r\n  //       autoClose: false,\r\n  //       draggable: false,\r\n  //       toastId: \"customId\",\r\n  //     })\r\n  //   );\r\n};\r\n\r\nexport default EmailVerificationToast;\r\n"],"names":["verificationTimer","localStorage","getItem","navigate","useNavigate","auth","useSelector","state","emailVerified","getAuth","currentUser","sendEmailVerificationHandler","Date","now","toast","setItem","headers","Headers","append","id","fetch","email","name","ok","Modal","open","Box","sx","position","top","left","transform","width","bgcolor","border","boxShadow","p","Typography","textAlign","variant","component","className","classes","onClick"],"sourceRoot":""}